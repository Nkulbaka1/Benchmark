# Бенчмарк
В ходе работы был написан бенчмарк для следующих 5 библиотек:
- PostgreSQL
- SQLite
- DuckDB
- Pandas
- SQLAlchemy

В файле config.py можно задать следующие параметры запуска:
- start_postgres_test - запустить тест PostgreSQL
- start_sqlite_test - запустить тест SQLlite
- start_duckdb_test - запустить тест DuckDB
- start_pandas_test - запустить тест Pandas
- start_sqlalchemy_test - запустить тест SQLAlchemy
- db_name - название базы данных
- host - ip адрес контейнера с PostgreSQL
- user - пользователь
- password - пароль
- port - порт базы данных
- path_to_file_sqlite - абсолютный путь к sqlite.db файлу
- path_to_file_csv - абсолютный путь к csv файлу с базой данных
- number_of_tests - количество тестов
- create_db_postgres - нужно ли создавать postgres бд
- create_db_sqlite - нужно ли создавать sqlite бд

Для запуска необходимы следующие пакеты:
- psycopg2
- duckdb
- pandas
- sqlalchemy

## О библиотеках

**PostgreSQL**
- Самая медленная библиотека из тестируемых
- Слишком долгое загрузка в постгрес большого дата сета(около двух часов)
- Попытки загрузки большого дата сета в постгрес приводили к неконтролируемому пожиранию оперативной памяти. Проблему удалось решить введением в метод to_sql параметра 'chunksize', который ограничивает число обрабатываемых строк(спасибо Pandas)
- Было тяжело разобраться с функционалом библиотеки и его работой, вероятно из-за того, что PostgreSQL был первой библиотекой, с которой я имел дело при написании бенчмарка

**SQLite**
- Ещё одна не очень быстрая библиотека. По скорости сравнима с SQLAlchemy
- Заполнение базы данных больши дата сетом заняло около полутора часов
- Библиотека не смогла отличить столбец airport_fee от столбца Airport_fee. Проблема решилась переименованием одного из столбцов
- Работать с библиотекой было приятно, серьезных трудностей не было

**DuckDB**
- Библиотека делит первое место по скорости с Pandas
- Отсутствие необходимости что-то куда-то грузить, можно работать сразу после прочтения файла
- Самая простая и понятная библиотека в подборке
- Большая скорость достигается за счёт использования технологии обработки данных OLAP

**Pandas**
- Одна из самых быстрых библиотек в подборке
- С помощью этой библиотеки заполнял postgres и sqlite
- Отсутствие встроенного SQL. Писал запросы опираясь на статью с Медиума из ТЗ
- Сложности возникали в основном с написанием запросов, в остальном -  серьёзных проблем не было

**SQLAlchemy**
- Не самая медленная, но и далеко не самая быстрая. Сравнима по скорости с SQLite
- Простая и понятная в работе
- Фишка библиотеки - ORM, но мне было привычнее работать через обычные SQL-запросы

## Графики
**Маленький дата сет(200 Мб)**

![Tiny_data_set](https://github.com/Nkulbaka1/Bd_lab_3/assets/129120650/b2b296f7-1ccd-4637-9808-1fb4ff82258b)


**Большой дата сет(2 гб)**

![Big_data_set](https://github.com/Nkulbaka1/Bd_lab_3/assets/129120650/f4683593-46dc-494d-9326-2ebe7a937c3a)
